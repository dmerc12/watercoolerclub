<!DOCTYPE html>
<html lang="en">
<head>
    <title>View Applied Jobs</title>
</head>

<body>

    <input type="number" id="applicant-id-input" placeholder="Enter applicant ID here.">
    <button id="select-button" onclick="viewAppliedJobs()">Search</button> 
    <button id="backButton" onclick="returnHome()">Return</button>

    <table>
        <thead>
            <tr>
                <th>Job Title</th>
                <th>Job Type</th>
                <th>Job Description</th>
                <th>Job Location</th>
                <th>Company Name</th>

            </tr>
            </thead>
        <tbody id="view-applied-jobs-table">
        </tbody>
    </table>
</body>
<script>
    // BASED ON JOB SEARCH WEBPAGE
// ALSO, USING PARAMETERS AND PATH IN INTELLIJ AND POSTMAN:

//      "/jobSearch/{jobType}/{jobLocation}" "/jobInsertJob/{jobId}/{applicantId}"

//      http://localhost:8080/jobSearch
//      http://localhost:8080/jobInsertJob/{jobId}/{applicantId}
//      http://localhost:8080/viewAppliedJobs



const viewJobTable = document.getElementById("view-applied-jobs-table");
const jobId = document.getElementById("job-id-input");
const applicantId = document.getElementById("applicant-id-input");


async function viewAppliedJobs() {
    let requestURL = `http://localhost:8080/viewAppliedJobs/${applicantId.value}`
    let response = await fetch(requestURL, {method:"GET"});
    if (response.status == 200) {
        const data = await response.json();
        viewAppliedJobsTable(data);
    }

}                                                                               

function viewAppliedJobsTable(data) {
    viewJobTable.innerHTML = ""                                       
    for (let key in data) {
        const row = document.createElement("tr");
        const jobType = data[key].type;
        const jobLocation = data[key].location;
        const jobTitle = data[key].title;
        const jobDescription = data[key].description;
        const companyName = data[key].companyName;

        viewJobTable.appendChild(row);

        dataList = [jobType, jobLocation, jobTitle, jobDescription, companyName]
                                                                                   
    for (let element of dataList) {
        const square = document.createElement("td");
        square.textContent = element;
        row.appendChild(square);
    }

}
}
function returnHome(){
    window.location.href = "ind-home.html"
}
</script>
</html>